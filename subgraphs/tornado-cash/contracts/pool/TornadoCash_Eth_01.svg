<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="1100pt" height="1319pt"
 viewBox="0.00 0.00 1099.59 1318.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1314.6)">
<title>UmlClassDiagram</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1314.6 1095.5892,-1314.6 1095.5892,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="353.1375,-1202.1 353.1375,-1310.1 882.1395,-1310.1 882.1395,-1202.1 353.1375,-1202.1"/>
<text text-anchor="middle" x="617.6385" y="-1293.5" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="617.6385" y="-1276.7" font-family="Times,serif" font-size="14.00" fill="#000000">Hasher</text>
<polyline fill="none" stroke="#000000" points="353.1375,-1268.5 882.1395,-1268.5 "/>
<text text-anchor="middle" x="617.6385" y="-1251.9" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="353.1375,-1243.7 882.1395,-1243.7 "/>
<text text-anchor="start" x="361.1375" y="-1227.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="361.1375" y="-1210.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;abstract&gt;&gt; MiMCSponge(in_xL: uint256, in_xR: uint256): (xL: uint256, xR: uint256)</text>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="#000000" points="448.4705,-838.7 448.4705,-1165.1 786.8065,-1165.1 786.8065,-838.7 448.4705,-838.7"/>
<text text-anchor="middle" x="617.6385" y="-1148.5" font-family="Times,serif" font-size="14.00" fill="#000000">MerkleTreeWithHistory</text>
<polyline fill="none" stroke="#000000" points="448.4705,-1140.3 786.8065,-1140.3 "/>
<text text-anchor="start" x="456.4705" y="-1123.7" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="456.4705" y="-1106.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;FIELD_SIZE: uint256</text>
<text text-anchor="start" x="456.4705" y="-1090.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;ZERO_VALUE: uint256</text>
<text text-anchor="start" x="456.4705" y="-1073.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;levels: uint32</text>
<text text-anchor="start" x="456.4705" y="-1056.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;filledSubtrees: bytes32[]</text>
<text text-anchor="start" x="456.4705" y="-1039.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;zeros: bytes32[]</text>
<text text-anchor="start" x="456.4705" y="-1022.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;currentRootIndex: uint32</text>
<text text-anchor="start" x="456.4705" y="-1006.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;nextIndex: uint32</text>
<text text-anchor="start" x="456.4705" y="-989.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;ROOT_HISTORY_SIZE: uint32</text>
<text text-anchor="start" x="456.4705" y="-972.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;roots: bytes32[]</text>
<polyline fill="none" stroke="#000000" points="448.4705,-964.3 786.8065,-964.3 "/>
<text text-anchor="start" x="456.4705" y="-947.7" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="456.4705" y="-930.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_insert(_leaf: bytes32): (index: uint32)</text>
<text text-anchor="start" x="456.4705" y="-914.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="456.4705" y="-897.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_treeLevels: uint32)</text>
<text text-anchor="start" x="456.4705" y="-880.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;hashLeftRight(_left: bytes32, _right: bytes32): bytes32</text>
<text text-anchor="start" x="456.4705" y="-863.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isKnownRoot(_root: bytes32): bool</text>
<text text-anchor="start" x="456.4705" y="-846.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getLastRoot(): bytes32</text>
</g>
<!-- 1&#45;&gt;0 -->
<g id="edge1" class="edge">
<title>1&#45;&gt;0</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M617.6385,-1165.4045C617.6385,-1174.586 617.6385,-1183.4907 617.6385,-1191.9037"/>
<polygon fill="#000000" stroke="#000000" points="614.1386,-1191.9075 617.6385,-1201.9075 621.1386,-1191.9075 614.1386,-1191.9075"/>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="#000000" points="804.6238,-939.5 804.6238,-1064.3 1002.6532,-1064.3 1002.6532,-939.5 804.6238,-939.5"/>
<text text-anchor="middle" x="903.6385" y="-1047.7" font-family="Times,serif" font-size="14.00" fill="#000000">ReentrancyGuard</text>
<polyline fill="none" stroke="#000000" points="804.6238,-1039.5 1002.6532,-1039.5 "/>
<text text-anchor="start" x="812.6238" y="-1022.9" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="812.6238" y="-1006.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;_guardCounter: uint256</text>
<polyline fill="none" stroke="#000000" points="804.6238,-997.9 1002.6532,-997.9 "/>
<text text-anchor="start" x="812.6238" y="-981.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="812.6238" y="-964.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; nonReentrant()</text>
<text text-anchor="start" x="812.6238" y="-947.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor()</text>
</g>
<!-- 3 -->
<g id="node4" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="#000000" points="0,-947.9 0,-1055.9 391.277,-1055.9 391.277,-947.9 0,-947.9"/>
<text text-anchor="middle" x="195.6385" y="-1039.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="195.6385" y="-1022.5" font-family="Times,serif" font-size="14.00" fill="#000000">IVerifier</text>
<polyline fill="none" stroke="#000000" points="0,-1014.3 391.277,-1014.3 "/>
<text text-anchor="middle" x="195.6385" y="-997.7" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="0,-989.5 391.277,-989.5 "/>
<text text-anchor="start" x="8" y="-972.9" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="8" y="-956.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;abstract&gt;&gt; verifyProof(_proof: bytes, _input: uint256[]): bool</text>
</g>
<!-- 4 -->
<g id="node5" class="node">
<title>4</title>
<polygon fill="#f2f2f2" stroke="#000000" points="223.6878,-391.3 223.6878,-801.7 1091.5892,-801.7 1091.5892,-391.3 223.6878,-391.3"/>
<text text-anchor="middle" x="657.6385" y="-785.1" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="657.6385" y="-768.3" font-family="Times,serif" font-size="14.00" fill="#000000">Tornado</text>
<polyline fill="none" stroke="#000000" points="223.6878,-760.1 1091.5892,-760.1 "/>
<text text-anchor="start" x="231.6878" y="-743.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="231.6878" y="-726.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;denomination: uint256</text>
<text text-anchor="start" x="231.6878" y="-709.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;nullifierHashes: mapping(bytes32=&gt;bool)</text>
<text text-anchor="start" x="231.6878" y="-693.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;commitments: mapping(bytes32=&gt;bool)</text>
<text text-anchor="start" x="231.6878" y="-676.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;verifier: IVerifier</text>
<text text-anchor="start" x="231.6878" y="-659.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;operator: address</text>
<polyline fill="none" stroke="#000000" points="223.6878,-651.3 1091.5892,-651.3 "/>
<text text-anchor="start" x="231.6878" y="-634.7" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="231.6878" y="-617.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;abstract&gt;&gt; _processDeposit()</text>
<text text-anchor="start" x="231.6878" y="-601.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;abstract&gt;&gt; _processWithdraw(_recipient: address, _relayer: address, _fee: uint256, _refund: uint256)</text>
<text text-anchor="start" x="231.6878" y="-584.3" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="231.6878" y="-567.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; deposit(_commitment: bytes32)</text>
<text text-anchor="start" x="231.6878" y="-550.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; withdraw(_proof: bytes, _root: bytes32, _nullifierHash: bytes32, _recipient: address, _relayer: address, _fee: uint256, _refund: uint256)</text>
<text text-anchor="start" x="231.6878" y="-533.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isSpentArray(_nullifierHashes: bytes32[]): (spent: bool[])</text>
<text text-anchor="start" x="231.6878" y="-517.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;updateVerifier(_newVerifier: address)</text>
<text text-anchor="start" x="231.6878" y="-500.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;changeOperator(_newOperator: address)</text>
<text text-anchor="start" x="231.6878" y="-483.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="231.6878" y="-466.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Deposit(commitment: bytes32, leafIndex: uint32, timestamp: uint256)</text>
<text text-anchor="start" x="231.6878" y="-449.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Withdrawal(to: address, nullifierHash: bytes32, relayer: address, fee: uint256)</text>
<text text-anchor="start" x="231.6878" y="-433.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyOperator()</text>
<text text-anchor="start" x="231.6878" y="-416.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_verifier: IVerifier, _denomination: uint256, _merkleTreeHeight: uint32, _operator: address)</text>
<text text-anchor="start" x="231.6878" y="-399.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isSpent(_nullifierHash: bytes32): bool</text>
</g>
<!-- 4&#45;&gt;1 -->
<g id="edge2" class="edge">
<title>4&#45;&gt;1</title>
<path fill="none" stroke="#000000" d="M637.3748,-801.8722C637.1574,-804.0756 636.9401,-806.2785 636.7229,-808.48"/>
<polygon fill="none" stroke="#000000" points="626.2633,-807.5539 633.7668,-838.44 647.1619,-809.616 626.2633,-807.5539"/>
</g>
<!-- 4&#45;&gt;2 -->
<g id="edge3" class="edge">
<title>4&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M782.26,-801.8722C806.0961,-841.1533 829.8509,-880.3004 849.9431,-913.4118"/>
<polygon fill="none" stroke="#000000" points="841.0009,-918.9156 865.5406,-939.116 858.9541,-908.0214 841.0009,-918.9156"/>
</g>
<!-- 4&#45;&gt;3 -->
<g id="edge4" class="edge">
<title>4&#45;&gt;3</title>
<path fill="none" stroke="#000000" d="M423.5932,-801.8722C365.5896,-852.7697 307.8422,-903.4425 264.9826,-941.0513"/>
<polygon fill="#000000" stroke="#000000" points="262.6348,-938.455 257.4268,-947.6815 267.2518,-943.7166 262.6348,-938.455"/>
</g>
<!-- 5 -->
<g id="node6" class="node">
<title>5</title>
<polygon fill="#f2f2f2" stroke="#000000" points="348.7379,-212.7 348.7379,-354.3 966.5391,-354.3 966.5391,-212.7 348.7379,-212.7"/>
<text text-anchor="middle" x="657.6385" y="-337.7" font-family="Times,serif" font-size="14.00" fill="#000000">ETHTornado</text>
<polyline fill="none" stroke="#000000" points="348.7379,-329.5 966.5391,-329.5 "/>
<text text-anchor="middle" x="657.6385" y="-312.9" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="348.7379,-304.7 966.5391,-304.7 "/>
<text text-anchor="start" x="356.7379" y="-288.1" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="356.7379" y="-271.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_processDeposit()</text>
<text text-anchor="start" x="356.7379" y="-254.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_processWithdraw(_recipient: address, _relayer: address, _fee: uint256, _refund: uint256)</text>
<text text-anchor="start" x="356.7379" y="-237.7" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="356.7379" y="-220.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_verifier: IVerifier, _denomination: uint256, _merkleTreeHeight: uint32, _operator: address)</text>
</g>
<!-- 5&#45;&gt;3 -->
<g id="edge6" class="edge">
<title>5&#45;&gt;3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M348.517,-330.3514C286.9325,-345.9227 234.9059,-365.8455 214.6385,-390.8 180.8404,-432.4143 188.554,-788.9296 193.309,-937.4113"/>
<polygon fill="#000000" stroke="#000000" points="189.8215,-937.8547 193.6456,-947.7353 196.8178,-937.6265 189.8215,-937.8547"/>
</g>
<!-- 5&#45;&gt;4 -->
<g id="edge5" class="edge">
<title>5&#45;&gt;4</title>
<path fill="none" stroke="#000000" d="M657.6385,-354.5245C657.6385,-356.672 657.6385,-358.8505 657.6385,-361.0574"/>
<polygon fill="none" stroke="#000000" points="647.1386,-361.133 657.6385,-391.133 668.1386,-361.133 647.1386,-361.133"/>
</g>
<!-- 6 -->
<g id="node7" class="node">
<title>6</title>
<polygon fill="#f2f2f2" stroke="#000000" points="348.7379,-.5 348.7379,-175.7 966.5391,-175.7 966.5391,-.5 348.7379,-.5"/>
<text text-anchor="middle" x="657.6385" y="-159.1" font-family="Times,serif" font-size="14.00" fill="#000000">TornadoCash_Eth_01</text>
<polyline fill="none" stroke="#000000" points="348.7379,-150.9 966.5391,-150.9 "/>
<text text-anchor="start" x="356.7379" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="356.7379" y="-117.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;isMigrated: bool</text>
<polyline fill="none" stroke="#000000" points="348.7379,-109.3 966.5391,-109.3 "/>
<text text-anchor="start" x="356.7379" y="-92.7" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="356.7379" y="-75.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; finishMigration()</text>
<text text-anchor="start" x="356.7379" y="-59.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;migrateState(_commitments: bytes32[], _nullifierHashes: bytes32[])</text>
<text text-anchor="start" x="356.7379" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;initializeTreeForMigration(_filledSubtrees: bytes32[], _root: bytes32)</text>
<text text-anchor="start" x="356.7379" y="-25.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="356.7379" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_verifier: IVerifier, _denomination: uint256, _merkleTreeHeight: uint32, _operator: address)</text>
</g>
<!-- 6&#45;&gt;3 -->
<g id="edge8" class="edge">
<title>6&#45;&gt;3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M399.797,-175.8781C378.7453,-186.8478 358.3867,-198.9382 339.6385,-212.2 254.0705,-272.7276 222.1471,-292.5524 185.6385,-390.8 115.5879,-579.3116 154.7425,-823.6494 179.7981,-937.8247"/>
<polygon fill="#000000" stroke="#000000" points="176.4305,-938.8042 182.0248,-947.8017 183.2625,-937.2794 176.4305,-938.8042"/>
</g>
<!-- 6&#45;&gt;5 -->
<g id="edge7" class="edge">
<title>6&#45;&gt;5</title>
<path fill="none" stroke="#000000" d="M657.6385,-175.7975C657.6385,-178.0034 657.6385,-180.2162 657.6385,-182.4312"/>
<polygon fill="none" stroke="#000000" points="647.1386,-182.4784 657.6385,-212.4784 668.1386,-182.4785 647.1386,-182.4784"/>
</g>
</g>
</svg>
